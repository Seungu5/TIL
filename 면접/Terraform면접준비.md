
## 테라폼이란

Terraform은 안전하고 효율적인 방식으로 인프라를 구축, 편집 및 버전화할 수 있는 코드형 인프라(IaC) 도구입니다. 여기에는 컴퓨팅 인스턴스, 메모리, 네트워킹, DNS 레코드, SaaS 서비스 등과 같은 하위 수준 및 상위 수준 구성 요소가 모두 포함됩니다. Terraform은 타사 서비스와 고유한 사내 솔루션을 모두 관리할 수 있습니다. 

Terraform은 구성 파일을 사용하여 단일 애플리케이션 또는 전체 데이터 센터를 실행하는 데 필요한 구성 요소를 알려줍니다. Amazon Web Services, IBM Cloud, Google Cloud, Platform, DigitalOcean, Linode, Microsoft Azure, Oracle Cloud Infrastructure, OVH, VMware, vSphere, OpenNebula 및 OpenStack은 모두 Terraform을 사용합니다.

## 신입을 위한 Terraform 인터뷰 질문

### 1. Terraform의 주요 기능은 무엇입니까?

다음은 Terraform의 주요 기능입니다.

-  코드로서의 인프라: Terraform의 고급 구성 언어는 사람이 읽을 수 있는 선언적 구성 파일로 인프라를 설명하는 데 사용됩니다. 이제 편집, 공유 및 재사용할 수 있는 청사진을 생성할 수 있습니다.

- 실행 전략: 인프라를 수정하기 전에 Terraform은 수행 계획을 설명하고 귀하의 동의를 요청하는 실행 계획을 개발합니다. Terraform이 인프라를 생성, 업그레이드 또는 파괴하기 전에 변경 사항을 평가할 수 있습니다.

- 리소스 그래프: Terraform은 리소스 그래프를 구축하는 동시에 비의존 리소스를 개발하거나 변경합니다. 이를 통해 Terraform은 최대한 빨리 리소스를 구성하는 동시에 인프라에 대한 추가 정보를 제공할 수 있습니다.

- 변경 자동화: Terraform은 사람의 개입이 거의 또는 전혀 없이 인프라에 대한 복잡한 변경 세트의 적용을 자동화할 수 있습니다. Terraform은 구성 파일을 업데이트할 때 발생한 일을 식별하고 종속성을 고려한 증분 실행 계획을 제공합니다.


### 2. Terraform의 사용 사례는 무엇입니까?

 다음은 Terraform의 사용 사례입니다.

- Heroku 앱 설정:
Heroku는 웹 애플리케이션 호스팅을 위한 탁월한 PaaS(Platform as a Service)입니다. 개발자는 먼저 앱을 빌드한 다음 데이터베이스 또는 이메일 서비스와 같은 추가 기능을 추가합니다. dyno 또는 worker의 수를 탄력적으로 확장하는 기능은 가장 좋은 기능 중 하나입니다. 반면에 대부분의 중요하지 않은 응용 프로그램에는 많은 수의 추가 기능과 외부 서비스가 빠르게 필요합니다.

- Terraform은 Heroku 애플리케이션에 필요한 설정을 코드화하여 모든 필수 추가 기능이 있는지 확인하는 데 사용할 수 있지만 CNAME을 설정하도록 DNSimple를 구성하거나 앱의 CDN으로 Cloudflare를 구성하는 것과 같이 그 이상일 수도 있습니다. 무엇보다도 Terraform은 웹 인터페이스를 사용하지 않고 약 30초 만에 이 모든 것을 달성할 수 있습니다.

- 셀프 서비스 클러스터: 
거대하고 성장하는 인프라를 관리하는 중앙 집중식 운영 팀은 주어진 조직 수준에서 매우 어려워집니다. 제품 팀이 중앙 운영 팀에서 제공한 도구를 사용하여 자체 인프라를 관리할 수 있는 "셀프 서비스" 인프라를 만드는 것이 더 매력적입니다.
Terraform 구성은 서비스를 구성하고 확장하는 방법에 대한 지식을 문서화하는 데 사용할 수 있습니다. 그런 다음 이러한 구성을 비즈니스 전체에 게시하여 클라이언트 팀이 Terraform을 사용하여 서비스를 관리할 수 있도록 할 수 있습니다.

- 빠른 환경 생성: 
프로덕션 환경과 스테이징 환경 또는 품질 보증 환경이 모두 있는 것이 일반적입니다. 이러한 환경은 프로덕션 환경의 더 작은 클론이며 일반에 출시되기 전에 새 앱을 테스트하는 데 사용됩니다. 프로덕션 환경이 커지고 복잡해짐에 따라 최신 스테이징 환경을 유지 관리하는 것이 점점 더 어려워집니다.
Terraform을 사용하여 프로덕션 환경을 성문화한 다음 스테이징, QA 및 개발과 공유할 수 있습니다. 이러한 설정을 사용하여 테스트한 다음 즉시 폐기할 새 환경을 빠르게 만들 수 있습니다. Terraform은 병렬 환경을 즉석에서 생성하고 파괴할 수 있도록 함으로써 병렬 환경을 유지하는 데 따르는 어려움을 줄이는 데 도움이 될 수 있습니다.

- 여러 클라우드 배포: 
내결함성을 높이려면 인프라를 여러 클라우드에 분산시키는 것이 일반적입니다. 하나의 지역 또는 클라우드 공급자만 사용되는 경우 내결함성은 해당 공급자의 가용성에 따라 제한됩니다. 지역 또는 전체 공급자가 다운될 때 멀티 클라우드 전략은 보다 부드러운 복구를 제공합니다.
많은 기존 인프라 관리 솔루션이 클라우드 전용이기 때문에 다중 클라우드 설치를 구현하는 것이 어려울 수 있습니다. Terraform은 클라우드에 구애받지 않으므로 단일 구성으로 수많은 공급자와 클라우드 간 종속성을 관리할 수 있습니다. 이를 통해 운영자는 관리 및 오케스트레이션을 단순화하여 대규모 멀티 클라우드 인프라를 개발할 수 있습니다.

- 다중 계층 아키텍처가 있는 애플리케이션: 
N 계층 아키텍처는 비교적 인기 있는 구조입니다. 데이터베이스 계층이 있는 웹 서버 풀은 가장 널리 사용되는 2계층 시스템입니다. API 서버, 캐시 서버, 라우팅 메시 등이 추가되었습니다. 단계를 개별적으로 확장할 수 있고 관심사를 분리할 수 있기 때문에 이 구조가 사용됩니다.
Terraform은 이러한 유형의 인프라를 만들고 관리하기 위한 훌륭한 도구입니다. Terraform은 각 계층의 리소스를 함께 정렬하면 각 계층 간의 종속성을 자동으로 처리합니다. 웹 서버를 프로비저닝하기 전에 Terraform은 데이터베이스 계층이 실행 중인지 확인하고 로드 밸런서가 웹 노드에 연결되어 있는지 확인합니다. 그런 다음 Terraform에서 개수 구성 값을 변경하여 각 계층을 빠르게 확장할 수 있습니다. 리소스 생성 및 프로비저닝이 코드화되고 자동화되기 때문에 로드에 따라 탄력적으로 확장할 수 있습니다.

- 리소스 스케줄러:
대규모 인프라에서 컴퓨터에 애플리케이션을 정적으로 할당하는 것이 점점 더 어려워지고 있습니다. Borg, Mesos, YARN 및 Kubernetes를 포함하여 이 문제를 처리하는 데 사용할 수 있는 다양한 스케줄러가 있습니다. Docker 컨테이너, Hadoop, Spark 및 기타 다양한 소프트웨어 도구를 동적으로 예약하는 데 사용할 수 있습니다.
Terraform은 Amazon Web Services와 같은 물리적 공급자만을 위한 것이 아닙니다. Terraform은 리소스 스케줄러가 공급자로 취급될 수 있기 때문에 리소스 스케줄러에서 리소스를 요청할 수 있습니다. 이를 통해 Terraform은 스케줄러를 실행하고 예약된 그리드에 프로비저닝하는 물리적 인프라를 설정하는 것과 같은 계층에서 작업할 수 있습니다.

- 소프트웨어 정의 네트워킹:
SDN(소프트웨어 정의 네트워킹)은 운영자와 개발자에게 네트워크에 대한 더 많은 제어 권한을 제공하고 네트워크가 상위에서 실행되는 애플리케이션을 더 잘 지원할 수 있게 해주므로 데이터 센터에서 점점 더 보편화되고 있습니다. 제어 계층과 인프라 계층은 SDN 시스템에서 일반적입니다.
Terraform은 소프트웨어 정의 네트워크 설정을 코드화하는 데 사용할 수 있습니다. Terraform은 제어 계층과 상호 작용하여 이 구성을 사용하여 설정을 자동으로 설정하고 조정할 수 있습니다. 이렇게 하면 설정의 버전을 지정하고 수정을 자동화할 수 있습니다. 예를 들어 Terraform을 사용하여 AWS VPC를 설정할 수 있습니다.

- 소프트웨어 데모:
최신 소프트웨어는 점점 더 네트워크화되고 배포되고 있습니다. Vagrant와 같은 솔루션은 데모용 가상화 환경을 만들기 위해 존재하지만 실제 인프라에서 프로덕션 환경과 더 유사한 소프트웨어를 시연하는 것은 여전히 ​​어렵습니다.
AWS와 같은 클라우드 제공업체에서 소프트웨어 작성자는 Terraform 구성을 제공하여 데모를 개발, 프로비저닝 및 부트스트랩할 수 있습니다. 최종 고객은 자체 인프라에서 프로그램을 간단히 시연할 수 있으며 클러스터 크기와 같은 설정을 조정하여 모든 규모에서 도구를 보다 철저하게 테스트할 수 있습니다.


### 3. Azure에서 Terraform을 콜백과 함께 사용할 수 있습니까? 예를 들어, 로깅 시스템, 트리거 또는 기타 이벤트에 콜백을 보냅니까?

예. Azure Event Hubs를 사용하여 이를 수행할 수 있습니다. 이제 Terraform AzureRM 공급자에서 이 기능에 액세스할 수 있습니다. Terraform의 Azure 공급업체는 사용자에게 간단한 기능을 제공합니다. Microsoft Azure Cloud Shell에는 이미 설정된 Terraform 발생이 포함되어 있습니다.


### 4. Terraform의 맥락에서 terraform init는 무엇을 의미합니까?

Terraform init 명령은 Terraform 구성 파일을 찾을 수 있는 작업 디렉토리를 만듭니다. 새 Terraform 구성을 생성하거나 버전 제어에서 이전 구성을 복제한 후 먼저 이 명령을 실행하십시오. 이 명령은 두 번 이상 사용하는 것이 안전합니다. 연속적으로 실행하면 오류가 발생할 수 있다는 사실에도 불구하고 이 명령은 현재 설정이나 상태를 덮어쓰지 않습니다.

```
terraform init [options]
```

다음 옵션은 init 명령과 함께 사용할 수 있습니다.

-input=true: 이 옵션은 사용자 입력이 필수인 경우 true로 설정됩니다. 사용자 입력이 제공되지 않으면 오류가 발생합니다.
-lock=false: 이 옵션은 상태 관련 작업 동안 상태 파일의 잠금을 비활성화하는 데 사용됩니다.
-lock-timeout=<duration>: 이 옵션은 Terraform이 상태 잠금을 가져오는 데 걸리는 시간을 재정의하는 데 사용됩니다. 잠금이 이미 다른 프로세스에 의해 보류된 경우 기본값은 0(0초)이며, 결과적으로 즉시 실패합니다.
-no-color: 이 옵션은 명령 출력에서 ​​색상 코드를 비활성화합니다.
-upgrade: 이 옵션을 선택하여 설치 프로세스 전반에 걸쳐 모듈 및 플러그인을 업그레이드할 수 있습니다.

### 5. Terraform이 DevOps 도구 중 하나로 선호되는 이유는 무엇입니까?

 Terraform이 DevOps 도구 중 하나로 선호되는 이유는 다음과 같습니다.

Terraform을 사용하면 구성/코드에서 인프라를 지정할 수 있으므로 인프라 변경 사항을 간단하게 재구축, 변경 및 추적할 수 있습니다. Terraform은 높은 수준의 인프라 설명입니다.
몇 가지 대안이 있지만 모두 단일 클라우드 공급자를 중심으로 합니다. Terraform은 완전히 플랫폼 중립적이며 다양한 서비스를 지원하는 유일한 강력한 솔루션입니다.
Terraform을 사용하면 코드를 버전 제어 하에 두거나 자동화된 테스트 작성 등과 같은 다양한 코딩 개념을 구현할 수 있습니다.

Terraform은 인프라 환경을 관리하기 위해 관리를 구성하기 위한 API를 사용하려고 할 때 많은 다른 솔루션이 임피던스 불일치로 인해 어려움을 겪기 때문에 인프라 관리를 위한 최고의 도구입니다. 대신 Terraform은 API가 인프라에 대한 생각을 중심으로 구축되었기 때문에 원하는 작업에 완벽하게 부합합니다.
Terraform은 번성하는 커뮤니티를 보유하고 있으며 오픈 소스이므로 상당한 추종자들을 끌어들이고 있습니다. 많은 사람들이 이미 그것을 사용하고 있어 플러그인, 확장 및 전문가 지원은 물론 사용 방법을 알고 있는 개인을 쉽게 찾을 수 있습니다. 그 결과 Terraform도 훨씬 더 빠른 속도로 진화하고 있습니다. 그들은 많은 릴리스를 가지고 있습니다.

Terraform의 속도와 효율성은 타의 추종을 불허합니다. 예를 들어, Terraform의 계획 명령을 사용하면 변경을 수행하기 전에 변경하려는 내용을 확인할 수 있습니다. Terraform 및 해당 코드 재사용 기능은 대부분의 수정을 CloudFormation과 같은 유사한 도구보다 빠르게 만듭니다.

### 6. Terraform의 주요 경쟁자를 언급하십시오.

 다음은 Terraform의 주요 경쟁업체입니다.


Azure 관리 도구.
모르페우스.
클라우드헬스.
터보노믹.
클라우드볼트.
앱티오 클라우드 가능성
앤서블
쿠버네티스
Platform9 관리형 Kubernetes.

### 7. Terraform Cloud에 대해 무엇을 알고 있습니까?

Terraform Cloud는 Terraform을 사용하는 팀을 위한 협업 도구입니다. 공유 상태 및 비밀 데이터에 대한 쉬운 액세스, 인프라 수정 승인을 위한 액세스 제어, Terraform 모듈 공유를 위한 개인 레지스트리, Terraform 구성의 콘텐츠 관리를 위한 전체 정책 제어 등을 제공합니다. Terraform Cloud는 https://app.terraform.io에서 찾을 수 있는 호스팅 서비스입니다. Terraform을 사용하면 소규모 팀이 버전 관리에 연결하고, 변수를 공유하고, 안정적인 원격 환경에서 Terraform을 실행하고, 원격 상태를 무료로 안전하게 저장할 수 있습니다. 유료 계층은 5명 이상의 사람을 추가하고, 다양한 수준의 액세스 권한을 가진 팀을 구성하고, 인프라를 구축하기 전에 정책을 시행하고, 보다 효율적으로 작업할 수 있는 기능을 제공합니다.

대기업은 비즈니스 계층을 활용하여 여러 동시 실행으로 확장하고, 개인 환경에서 인프라를 구축하고, SSO를 사용하여 사용자 액세스를 관리하고, 인프라 최종 사용자 셀프 서비스 프로비저닝을 자동화할 수 있습니다.

### 8. Terraform의 컨텍스트에서 destroy 명령을 설명합니다.

Terraform destroy 명령은 Terraform 설정에서 유지 관리하는 모든 원격 개체를 제거하는 간단한 방법입니다. 프로덕션 환경에서 수명이 긴 개체를 파괴하는 것을 피해야 하지만 Terraform은 개발을 위한 임시 인프라를 관리하는 데 가끔 사용됩니다.

통사론:
```
terraform destroy [options]
```
또한 다음 명령을 실행하여 파괴의 효과가 무엇인지 확인하기 위해 투기적 파괴 계획을 작성할 수 있습니다. 
```
terraform -destroy plan
```
그러면 Terraform Plan이 파괴 모드로 시작되어 제안된 파괴 변경 사항이 표시되지만 실행할 수는 없습니다.

### 9. Terraform 모듈에 대해 무엇을 알고 있습니까?

 Terraform 모듈은 Terraform 구성 파일을 포함하는 단일 디렉토리입니다. 단일 디렉토리에 하나 이상의 파일이 있는 단순한 배열도 모듈이라고 할 수 있습니다. 파일의 확장자는 .tf입니다. 이 디렉토리는 Terraform 명령이 이 디렉토리에서 직접 실행될 때 루트 모듈이라고 합니다. Terraform 명령은 현재 작업 디렉토리의 한 위치에서만 구성 파일을 사용합니다. 반면에 구성에서는 모듈 블록을 사용하여 다른 디렉토리에서 모듈을 호출할 수 있습니다. Terraform은 모듈 블록을 발견하면 해당 모듈에 대한 구성 파일을 로드하고 처리합니다. 다른 구성에 의해 호출되는 모듈은 종종 해당 구성의 "하위 모듈"이라고 합니다.

10. Terraform에서 모듈을 사용하면 어떤 이점이 있습니까?

 다음은 Terraform에서 모듈을 사용할 때의 이점입니다.

- 구성 구성: 구성 의 관련 부분을 함께 그룹화하여 모듈을 사용하면 구성에 더 쉽게 액세스하고, 이해하고, 변경할 수 있습니다. 적당히 복잡한 인프라도 구축하려면 수백 또는 수천 줄의 구성이 필요할 수 있습니다. 모듈을 활용하여 구성을 논리적 구성 요소로 구성할 수 있습니다.

- 구성 캡슐화: 모듈의 또 다른 장점은 구성을 논리적 구성 요소로 분리할 수 있다는 것입니다. 캡슐화를 사용하면 구성의 한 요소를 변경하여 다른 인프라를 변경하는 것과 같은 예기치 않은 결과를 방지할 수 있으며 동일한 이름으로 두 리소스의 이름을 지정하는 것과 같은 기본적인 실수를 방지할 수도 있습니다.

- 일관성 유지 및 모범 사례 보장: 모듈은 또한 구성의 균일성을 유지하는 데 도움이 될 수 있습니다. 일관성은 복잡한 구성을 더 쉽게 이해할 수 있게 해줄 뿐만 아니라 모든 설정에서 모범 사례를 따르도록 합니다. 예를 들어 클라우드 공급자는 Amazon S3 또는 Google Cloud Storage 버킷과 같은 객체 스토리지 서비스를 설정하기 위한 다양한 옵션을 제공합니다. 부적절하게 보안된 개체 저장소의 결과로 많은 주요 보안 문제가 발생했으며 관련된 복잡한 구성 옵션의 수를 고려할 때 이러한 서비스를 실수로 잘못 구성할 수 있습니다.
모듈은 오류 감소에 도움이 될 수 있습니다. 예를 들어, 조직의 모든 공개 웹사이트 버킷과 개인 로깅 버킷에 대한 별도의 모듈을 설정하는 방법을 정의하는 모듈을 설계할 수 있습니다. 또한 특정 리소스 유형에 대한 구성을 변경해야 하는 경우 모듈을 사용하면 한 곳에서 이를 수행하고 해당 모듈이 사용되는 모든 시나리오에 적용할 수 있습니다.

- 재사용성 지원: 처음부터 구성을 설정하고 모든 설정을 작성하는 것은 시간이 많이 걸리고 오류가 발생하기 쉽습니다. 자신, 팀의 다른 구성원 또는 사용할 모듈을 게시한 다른 Terraform 실무자가 생성한 구성을 재사용하면 시간을 절약하고 비용이 많이 드는 오류를 방지할 수 있습니다. 당신은 또한 당신이 만든 모듈을 동료나 더 많은 대중과 공유하여 그들이 당신의 노력으로부터 이익을 얻도록 할 수 있습니다.

### 11. Terraform 모듈을 사용하는 동안 따라야 하는 몇 가지 지침은 무엇입니까?

다음은 Terraform 모듈을 사용하는 동안 따라야 하는 몇 가지 지침입니다.

Terraform Cloud 또는 Terraform Enterprise 모듈 레지스트리에 게시하려면 terraform-<PROVIDER>-<NAME> 규칙을 사용해야 합니다.
설정을 작성할 때 모듈에 대해 생각하기 시작합니다. 모듈 사용의 이점은 한 사람이 유지 관리하는 다소 복잡한 Terraform 설정의 경우에도 올바르게 사용하는 데 걸리는 시간보다 큽니다.
코드를 구성하고 캡슐화하려면 로컬 모듈을 사용하십시오. 원격 모듈을 사용하거나 게시하지 않더라도 처음부터 모듈 측면에서 구성을 구성하면 인프라가 더 복잡해짐에 따라 설정을 유지 관리하고 업데이트하는 데 필요한 시간과 노력을 극적으로 최소화할 수 있습니다.
유용한 모듈을 식별하려면 공개된 Terraform 레지스트리로 이동하십시오. 공통 인프라 시나리오를 생성하기 위해 다른 사람의 노력에 의존함으로써 구성을 보다 빠르고 자신 있게 구현할 수 있습니다.
모듈을 게시하고 팀과 공유할 수 있습니다. 대부분의 인프라는 개인 그룹이 처리하며 모듈은 팀이 인프라 생성 및 유지 관리에 대해 협업하는 데 중요한 도구입니다.

### 12. Terraform 컨텍스트에서 null 리소스를 설명합니다.

null 리소스는 현재 리소스에 직접 연결되지 않은 프로비저닝 도구를 설정할 수 있는 리소스입니다. null 리소스는 다른 리소스처럼 작동하기 때문에 다른 리소스와 마찬가지로 프로비저닝 도구, 연결 세부 정보 및 기타 메타 매개변수를 구성할 수 있습니다. 이를 통해 프로비저닝 도구가 종속성 그래프에서 실행되는 시기를 보다 정확하게 제어할 수 있습니다.

### 13. Terraform의 컨텍스트에서 terraform validate 명령을 설명합니다.

terraform validate 명령은 원격 상태, 공급자 API 등과 같은 외부 서비스를 제외하고 구성에만 집중하여 디렉터리의 구성 파일을 확인합니다. Validate는 변수나 현재 상태에 관계없이 구성이 구문적으로 정확하고 내부적으로 일관성이 있는지 확인하기 위해 검사를 수행합니다. 결과적으로 속성 이름과 값 유형이 올바른지 확인하는 것과 같이 재사용 가능한 모듈의 일반적인 확인에 가장 적합합니다. 이 명령은 예를 들어 텍스트 편집기에서 사후 저장 확인으로 또는 연속 통합 시스템에서 재사용 가능한 모듈에 대한 테스트 단계로 자동으로 실행할 수 있습니다.

통사론:
```
terraform validate [options]
```
이 명령으로 다음 옵션을 사용할 수 있습니다.

-json - 텍스트 편집기 및 기타 자동화 시스템과의 통합에 적합한 기계 판독 가능한 JSON 형식으로 출력을 생성합니다. 색상은 항상 꺼져 있습니다.
-no-color - 제공되는 경우 출력은 무색입니다.

### 14. Terraform 컨텍스트에서 terraform apply 명령을 설명합니다.

Terraform apply 명령은 Terraform 계획의 작업을 수행하는 데 사용됩니다. terraform apply를 사용하는 가장 간단한 방법은 인수 없이 실행하는 것입니다. 이 경우 새 실행 계획(terraform 계획을 실행한 것처럼)을 구성한 다음 지정한 활동을 수행하기 전에 수락을 요청합니다. terraform 적용을 사용하는 또 다른 방법은 terraform plan -out=...으로 생성된 저장된 계획 파일의 파일 이름을 제공하는 것입니다. 이 경우 Terraform은 확인 메시지 없이 계획에 수정 사항을 적용합니다. 이 2단계 프로세스는 자동화된 환경에서 Terraform을 사용할 때 가장 유용합니다.

통사론:
```
terraform apply [options] [plan file]
```

### 15. Terraform 컨텍스트에서 Terraform 버전 명령을 설명합니다.

 terraform version 명령은 현재 Terraform 버전과 설치된 플러그인을 보여줍니다.

통사론:
```
terraform version [options]
```
비활성화하지 않는 한 버전은 Terraform 버전, 설치된 플랫폼, 설치된 공급자, 추가 인수 없이 업그레이드 및 보안 검사 결과를 표시합니다.

이 명령에는 하나의 선택적 플래그가 있습니다.

-json을 지정하면 버전 정보가 업그레이드 또는 보안 정보 없이 JSON 객체로 형식이 지정됩니다.

### 16. Terraform에서 지원하는 몇 가지 버전 관리 도구를 언급하십시오.

Terraform에서 지원하는 버전 관리 도구는 다음과 같습니다.


깃허브
GitLab CE
GitLab EE
버킷 클라우드

### 17. Terraform의 맥락에서 공급자에 대해 무엇을 이해합니까?

클라우드 제공자, SaaS 제공자 및 기타 API와 인터페이스하기 위해 Terraform은 "제공자"라는 플러그인을 사용합니다. Terraform 구성은 Terraform이 설치하고 사용하기 위해 필요한 공급자를 지정해야 합니다. 또한 일부 공급자는 사용하기 전에 설정(예: 끝점 URL 또는 클라우드 지역)이 필요합니다. Terraform은 각 공급자가 제공하는 리소스 유형 및/또는 데이터 소스 집합을 관리할 수 있습니다. 공급자는 각 리소스 유형을 구현합니다. Terraform은 인프라 없이는 어떤 인프라도 관리할 수 없습니다. 대부분의 서비스 제공업체는 특정 인프라 플랫폼(클라우드 또는 자체 호스팅)을 설정합니다. 고유한 리소스 이름에 대한 난수 생성과 같은 로컬 유틸리티는 공급자가 제공할 수 있습니다.

### 18. 핵심 테라폼의 작업 흐름을 설명하십시오.

Terraform의 핵심 워크플로는 세 단계로 구성됩니다.


쓰기 - 코드 형태로 인프라를 생성합니다.
계획 - 변경 사항이 구현되기 전에 어떻게 보일지 미리 계획합니다.
적용 - 반복 가능한 인프라를 만듭니다.
경력자를 위한 Terraform 인터뷰 질문

### 19. Terraform 요청 흐름의 아키텍처를 설명합니다.

Terraform의 요청은 다이어그램과 같이 다음 단계를 거칩니다.


다음은 위 아키텍처의 다양한 구성 요소입니다.

명령줄 인터페이스(CLI):

CLI(공용 언어 인터페이스)(명령 패키지)

루트 패키지의 일부 초기 부트스트랩(다이어그램에는 표시되지 않음)을 제외하고 사용자가 terraform 애플리케이션을 시작하면 실행이 명령 패키지의 "명령" 구현 중 하나로 바로 이동합니다. 리포지토리의 루트 디렉터리에 있는 commands.go 파일에는 사용자에게 표시되는 명령 이름과 해당 명령 패키지 유형 간의 매핑이 포함되어 있습니다. 

이러한 명령에 대한 명령 구현의 작업은 주어진 명령에 필요한 명령줄 인수, 명령줄 옵션 및 환경 변수를 읽고 구문 분석하고 이를 사용하여 backend.operation 개체를 생성하는 것입니다. 그런 다음 작업이 현재 선택된 백엔드로 전송됩니다.

백엔드:

Terraform에서 백엔드에는 다양한 책임이 있습니다. 

작업 수행(예: 계획, 적용)
작업 공간 정의 변수를 저장하려면
상태를 저장하려면
로컬 백엔드는 상태 관리자(로컬 백엔드가 직접 사용되는 경우 statemgr.Filesystem 또는 래핑되는 백엔드에서 제공하는 구현)를 사용하여 작업에 지정된 작업 공간의 현재 상태를 검색한 다음 구성 로더를 사용하여 다음을 수행합니다. 작업에 지정된 구성의 로드 및 초기 처리/검증을 수행합니다. 그런 다음 이 매개변수와 프로시저에 지정된 다른 매개변수를 사용하여 terraform.context 객체를 생성합니다. 기본 개체는 실제로 Terraform 작업을 실행합니다.

구성 로더:

패키지 구성의 모델 유형은 최상위 구성 구조를 나타냅니다. configs.Config는 전체 구성(루트 모듈 및 모든 하위 모듈)을 나타냅니다. configs 패키지는 구성 개체를 생성하기 위한 일부 저수준 기능을 제공하지만 주요 진입점은 하위 패키지 configload에 있는 configload.Loader를 통하는 것입니다. 구성이 백엔드에 의해 로드되면 로더는 하위 모듈을 설치하는 모든 복잡성(terraform init 동안)을 처리한 다음 해당 모듈을 다시 찾습니다. 루트 모듈에 대한 경로를 취하고 모든 하위 모듈을 재귀적 방식으로 로드하여 단일 구성을 생성합니다. 

상태 관리자:

상태 관리자는 작업 공간의 Terraform 상태에 대한 스냅샷 저장 및 검색을 담당합니다. 각 관리자는 statemgr 패키지 인터페이스의 하위 집합을 구현한 것이며, 대부분의 실용적인 관리자는 전체 statemgr.Full 작업 집합을 구현합니다. 더 작은 인터페이스는 기능이 상태 관리자에서 수행할 수 있는 작업에 대해 특정하기 위해 대부분 다른 기능 서명에서 사용하기 위한 것입니다. 모든 statemgr을 구현하지 않는 상태 관리자를 설계할 이유가 없습니다. 가득한.

그래프 빌더:

terraform.Context 메소드는 그래프 빌더를 호출합니다. 그래프 빌더는 해당 작업의 필수 단계와 이들 간의 종속 관계를 나타내는 데 사용됩니다. 그래프 작성 프로세스는 작업마다 다르기 때문에 각각 고유한 그래프 작성기가 있습니다. 예를 들어 "계획" 작업에는 구성에서 직접 생성된 그래프가 필요하지만 "적용" 작업은 적용 중인 계획에 명시된 수정 세트에서 그래프를 생성합니다.

그래프 워크:

그래프 워킹 방법은 그래프의 "발생한" 에지를 존중하는 방식으로 그래프의 각 꼭짓점을 방문합니다. 그래프의 각 꼭짓점은 "다음 이후 발생" 가장자리가 고려되는 방식으로 평가됩니다. 그래프 워크 방법은 가능한 경우 동시에 많은 정점을 평가합니다.

정점 평가:

그래프 워크 동안 각 정점에 대해 실행되는 작업을 실행이라고 합니다. 실행은 지정된 꼭짓점 유형에 적합한 일련의 임의 작업을 수행합니다. 그래프 워크가 "다음 이후에 발생" 가장자리를 사용하여 추가 정점 평가를 시작하기 전에 정점이 올바르게 완료되어야 합니다. 평가 중에 하나 이상의 오류가 발생하면 그래프 워크가 중단되고 오류가 사용자에게 반환됩니다.

### 20. Terraform과 Cloudformation을 구별하십시오.

다음 사항은 Terraform과 Cloudformation의 차이점을 강조합니다.


사용자 친근성: 
Terraform은 AWS, Azure, Google Cloud Platform 등과 같은 수많은 클라우드 서비스 공급자를 포괄하는 반면 CloudFormation은 AWS 서비스로 제한됩니다. Terraform은 대부분의 AWS 리소스를 다룹니다.

언어 기반: 
CloudFormation은 JSON 또는 YAML을 언어로 사용합니다. CloudFormation은 이제 읽고 관리하기 쉽습니다. 그러나 AWS 개발자는 크기가 51MB를 초과하는 CloudFormation 템플릿을 생성할 수 없습니다. 템플릿이 이 크기 제한을 초과하는 경우 개발자는 템플릿에 대해 계층화된 스택을 설정해야 합니다.
반면 Terraform은 Hashicorp의 자체 HCL 언어(Hashicorp 구성 언어)를 사용합니다. 이 언어는 JSON과도 호환됩니다.

상태 관리: 
CloudFormation은 AWS 관리형 서비스이므로 프로비저닝된 인프라가 여전히 양호한 상태인지 확인하기 위해 정기적으로 인프라를 검사합니다. 변경 사항이 있는 경우 CloudFormation은 철저한 응답을 받습니다.
반면에 Terraform은 가상 머신 또는 원격 컴퓨터가 될 수 있는 프로비저닝 머신에 인프라 상태를 저장합니다. 상태는 JSON 파일로 저장되며 Terraform은 이 파일을 관리하는 리소스를 설명하는 맵으로 사용합니다.
요약하자면, Cloudformation의 상태는 업데이트 충돌을 방지하는 CloudFormation에 의해 즉시 관리됩니다. Terraform은 상태를 더 쉽게 동기화할 수 있도록 로컬 디스크에 상태를 저장합니다. Terraform 상태는 상태 관리를 위한 또 다른 권장 방법인 S3와 같은 스토리지 서비스에 저장할 수도 있습니다. 이는 백엔드에서 정의되어야 하므로 관리가 더 쉽고 안전해집니다.

비용:
이 두 도구의 가장 좋은 점은 둘 다 완전히 무료라는 것입니다. 이 두 기술 모두 많은 도움과 예를 제공하는 상당한 규모의 커뮤니티를 가지고 있습니다. Cloudformation은 완전 무료입니다. 소비자가 지불하는 유일한 비용은 CloudFormation이 제공하는 AWS 서비스에 대한 비용입니다. Terraform은 완전 무료 오픈 소스 애플리케이션입니다. 반면 Terraform에는 더 많은 협업 및 거버넌스 기능이 있는 프리미엄 엔터프라이즈 버전이 포함되어 있습니다.


여러 클라우드 통합:
Terraform은 여러 클라우드 플랫폼에 걸쳐 서비스를 제공하려는 경우에 적합한 방법입니다. Terraform은 AWS, GCP, Azure 등을 포함한 다양한 클라우드 공급자와 함께 작동하지만 CloudFormation은 AWS 전용입니다. 설정에 여러 클라우드 설치가 포함된 경우 Cloudformation은 적합하지 않습니다. EC2, S3 등과 같은 AWS 리소스를 사용하는 경우 Cloudformation을 고수해야 합니다.

### 21. Terraform 컨텍스트에서 terraform taint 명령을 설명합니다.

Terraform은 terraform taint 명령에서 특정 항목이 저하되거나 손상되었다는 알림을 받습니다. 이것은 Terraform이 항목을 Terraform 상태에서 "오염된" 것으로 지정하는 것으로 표시되며, 이 경우 Terraform은 작성하는 다음 계획에서 교체를 제안합니다. 구성 수정이 필요하지 않음에도 불구하고 특정 개체를 강제로 교체하려면 terraform apply -replace 옵션을 사용하는 것이 좋습니다.

계획을 작성하는 동안 "교체" 옵션을 사용하는 것이 외부적으로 보이는 조치를 취하기 전에 변경의 전체 영향을 볼 수 있게 해주기 때문에 terraform taint를 사용하는 것보다 선호됩니다. 유사한 영향을 얻기 위해 테라폼 오염을 사용할 때, 영향을 고려할 기회를 갖기도 전에 오염된 개체에 대응하기 위해 팀의 다른 누군가가 새로운 전략을 고안할 위험이 있습니다.

통사론:
```
terraform taint [options] address
```
주소 옵션은 감염된 리소스의 위치를 ​​지정합니다. 이 명령으로 다음 옵션을 사용할 수 있습니다.

-allow-missing - 리소스가 없어도 명령이 제공되면 명령이 성공합니다(종료 코드 0). 상태 읽기 또는 쓰기 문제와 같은 다른 시나리오로 인해 명령이 오류를 반환할 수 있습니다.
-lock=false - 작업 기간 동안 상태를 잠그려는 Terraform의 기본 동작을 끕니다.
-lock-timeout=DURATION - -lock=false로 잠금을 비활성화하지 않는 한 오류가 발생하기 전에 일정 시간 동안 잠금을 다시 시도하도록 Terraform에 지시합니다. 3초 동안 "3s"와 같이 시간 단위 문자가 뒤에 오는 숫자가 기간 구문입니다.

22. Terraform과 Ansible을 구별하십시오.

Ansible : Ansible 은 매우 직관적인 IT 자동화 기술입니다. 구성 관리, 애플리케이션 배포, 클라우드 프로비저닝, 임시 작업 실행, 네트워크 자동화 및 다중 노드 오케스트레이션이 모두 이 소프트웨어에서 처리됩니다. 로드 밸런서를 사용한 다운타임 없는 롤링 업데이트와 같은 복잡한 수정은 Ansible을 사용하여 간단합니다.

다음 표에는 Ansible과 Terraform의 차이점이 나와 있습니다.


테라폼	
Terraform은 프로비저닝 도구입니다.
코드 방식의 선언적 인프라를 사용합니다.
클라우드 서비스를 오케스트레이션하고 처음부터 클라우드 인프라를 구축하는 데 이상적입니다.
기본적으로 Terraform은 베어메탈 프로비저닝을 허용하지 않습니다. 
포장 및 템플릿 측면에서 더 나은 지원을 제공하지 않습니다.


앤서블 
Ansible은 구성을 관리하기 위한 도구입니다.
절차적 방법이 필요합니다.
적절한 소프트웨어로 서버를 구성하고 이전에 구성된 리소스를 업데이트하는 데 주로 사용됩니다.
베어메탈 서버 프로비저닝은 Ansible에서 지원됩니다.
여기에는 완전한 패키징 및 템플릿 지원이 포함됩니다.
어떤 종류의 수명 주기 관리도 없습니다. 상태를 저장하지 않습니다.

### 23. 가상 사설 클라우드(VPC)란 무엇을 의미합니까? VPC 서비스를 사용하기 위해 Terraform에서 어떤 명령을 사용합니까?

가상 사설 클라우드(VPC)는 모든 AWS 서비스를 저장할 수 있는 AWS 내의 사설 가상 네트워크입니다. 게이트웨이, 라우팅 테이블, 네트워크 ACL(액세스 제어 목록), 서브넷 및 보안 그룹이 있으며 AWS의 논리적 데이터 센터가 됩니다. 퍼블릭 클라우드에서 서비스를 생성하면 나머지 세계에 효과적으로 공개되며 인터넷 공격에 취약할 수 있습니다. 인스턴스를 잠그고 VPC 내부에 배치하여 외부 위협으로부터 보호합니다. VPC는 트래픽 유형, IP 주소 및 인스턴스에 액세스할 수 있는 개인을 제한합니다.

이렇게 하면 권한이 없는 사용자가 리소스에 액세스하는 것을 막고 DDOS 공격으로부터 보호합니다. 모든 서비스에 인터넷 연결이 필요한 것은 아니므로 사설망에 안전하게 저장할 수 있습니다. 그런 다음 특정 컴퓨터만 인터넷에 연결하도록 허용할 수 있습니다.

Terraform에서 VPC 서비스를 사용하기 위해 aws_vpc 명령을 사용합니다.

### 24. Terraform의 맥락에서 terraform fmt 명령을 설명합니다.

Terraform 구성 파일은 terraform fmt 명령을 사용하여 일관된 구조와 스타일로 다시 작성됩니다. 이 명령은 Terraform 언어 스타일 규칙의 하위 집합과 약간의 가독성 조정을 사용합니다. Terraform 구성을 생성하는 다른 Terraform 명령은 Terraform fmt 스타일을 따르는 파일을 생성하므로 고유한 파일에서 이 스타일을 따르면 일관성이 보장됩니다. 형식 선택은 항상 주관적이기 때문에 terraform fmt의 선택에 동의하지 않을 수 있습니다. 이 명령은 의도적으로 독단적이며 사용자 정의 옵션이 부족합니다. 선택한 스타일이 모든 사람이 선호하는 스타일이 아닐지라도 주요 목표는 Terraform 코드베이스 전체에서 스타일 일관성을 촉진하는 것이기 때문입니다.

통사론:
```
terraform fmt [options] DIR
```

기본적으로 fmt는 현재 디렉토리에서 구성 파일을 찾습니다. dir 옵션이 제공되면 대신 지정된 디렉토리를 스캔합니다.

다음은 사용 가능한 플래그입니다.

-list=false - 이 옵션은 형식이 일치하지 않는 파일을 표시하지 않습니다.
-write=false - 이 옵션은 입력 파일을 덮어쓰는 것을 방지합니다. (입력이 STDIN 또는 -check인 경우 이는 암시됩니다.)
-diff - 서식 수정의 차이점을 표시합니다.
-check - 입력의 형식이 올바른지 확인합니다. 모든 입력이 올바르게 형식화되면 종료 상태는 0이 되고, 그렇지 않으면 0이 아닙니다.
-recursive - 하위 디렉토리의 파일도 처리합니다.

### 25. Terragrunt에 대해 무엇을 알고 있습니까? 그 용도는 무엇입니까?

Terragrunt는 DRY 구성을 유지 관리하고, 많은 Terraform 모듈을 처리하고, 원격 상태를 관리하기 위한 추가 기능을 추가하는 경량 래퍼입니다.


다음은 Terragrunt의 사용 사례입니다.

백그라운드 구성을 DRY(반복하지 않음)로 유지하려면: 루트 위치에서 백엔드 구성을 한 번 설정하고 모든 하위 모듈에서 해당 정보를 상속함으로써 Terragrunt는 DRY("반복하지 않음")를 유지하는 데 도움이 됩니다.
공급자 구성을 DRY로 유지하려면: 특히 인증 자격 증명을 변경하려는 경우 모든 모듈에서 공급자 구성을 통합하기 어려울 수 있습니다. Terragrunt를 사용하여 일반적인 Terraform 코드를 리팩터링하고 이를 사용하여 Terraform 모듈을 DRY로 유지할 수 있습니다. 제공자 구성은 백엔드 구성과 마찬가지로 루트 위치에서 한 번 정의할 수 있습니다.
Terraform 명령줄 인터페이스 인수를 DRY로 유지하려면 Terraform 세계에서 CLI 플래그는 복사/붙여넣기의 또 다른 일반적인 소스입니다. 매번 이러한 -var-file 옵션을 기억해야 하는 것은 어렵고 오류가 발생하기 쉽습니다. terragrunt.hcl 설정에서 CLI 매개변수를 코드로 선언함으로써 Terragrunt는 CLI 인수를 DRY로 유지하는 데 도움이 됩니다.
환경 전반에 걸쳐 변경 불가능하고 버전이 지정된 Terraform 모듈을 홍보하려면 수십만 줄의 인프라 코드를 구축하면서 배운 가장 중요한 교훈 중 하나에 따르면 대형 모듈은 위험한 것으로 간주되어야 합니다. 즉, 단일 Terraform 모듈에서 모든 환경(dev, stage, prod 등) 또는 엄청난 양의 인프라(서버, 데이터베이스, 로드 밸런서, DNS 등)를 정의하는 것은 나쁜 생각입니다. 대형 모듈은 느리고 안전하지 않으며 업데이트하기 어렵고 코드 검토, 테스트 및 취약합니다. Terragrunt를 사용하면 Terraform 코드를 한 번 정의한 다음 해당 코드의 버전이 지정된 변경 불가능한 "아티팩트"를 한 환경에서 다음 환경으로 승격할 수 있습니다.

### 26. Terraform의 맥락에서 상태 파일 잠금을 설명합니다.

Terraform의 상태 파일 잠금 방식은 주어진 상태 파일에 대한 활동을 차단하여 동일한 작업을 수행하는 많은 사용자 간의 충돌을 방지합니다. 한 사용자가 잠금을 해제하면 다른 사용자만 해당 상태에 액세스할 수 있습니다. Terraform은 백엔드가 지원하는 경우 잠재적으로 상태를 쓰는 모든 작업에 대해 상태를 잠급니다. 이렇게 하면 외부인이 잠금 장치에 액세스하여 상태를 손상시키는 것을 방지할 수 있습니다. 상태를 쓸 가능성이 있는 모든 작업은 자동으로 잠깁니다. 이것이 일어나고 있다는 징후는 없을 것입니다. 상태 잠금이 실패하면 Terraform이 계속되지 않습니다. -lock 플래그는 권장되지는 않지만 대부분의 작업에 대한 상태 잠금을 비활성화하는 데 사용할 수 있습니다. 잠금을 얻는 데 계획보다 오래 걸리면 Terraform에서 상태 메시지를 보냅니다. 백엔드가 상태 잠금을 활성화하면 Terraform이 그렇지 않더라도

### 27. Terraform 코어에 대해 무엇을 알고 있습니까? Terraform 코어의 주요 책임은 무엇입니까?

Terraform Core는 정적으로 컴파일되는 Go 프로그래밍 언어로 생성된 바이너리입니다. 컴파일된 바이너리는 Terraform을 사용하려는 모든 사람을 위한 출발점인 terraform 명령줄 도구(CLI)입니다. 소스 코드는 github.com/hashicorp/terraform에서 찾을 수 있습니다.

Terraform 코어의 주요 책임은 다음과 같습니다.

코드로서의 인프라를 사용하여 구성 파일 및 모듈 읽기 및 보간
자원 상태 관리
리소스 그래프 구성
계획의 실행
RPC를 통한 플러그인과의 통신

### 28. 문제가 발생하면 Terraform에서 롤백을 어떻게 제어하고 처리합니까?

버전 제어 시스템에서 이전 코드 버전을 다시 커밋하여 새 버전과 최신 버전으로 만들어야 합니다. 그러면 이전 코드를 실행하는 terraform 실행 명령이 시작됩니다. Terraform은 더 선언적이므로 코드의 모든 항목이 이전 상태로 되돌아가도록 할 것입니다. 상태 파일이 손상되면 Terraform Enterprise의 상태 롤백 기능을 사용하여 이전 상태를 복원합니다.

### 29. 한 모듈의 상위 개체를 다른 모듈에서 사용할 수 있도록 하려면 어떤 절차를 거쳐야 합니까?

높은 수준에서 한 모듈의 개체를 다른 모듈에서 사용할 수 있도록 하는 단계는 다음과 같습니다.

첫 번째 단계는 리소스 구성에서 출력 변수를 정의하는 것입니다. 리소스 구성 세부 정보를 정의할 때까지 로컬 및 모듈의 범위는 선언되지 않습니다.
이제 다른 모듈의 설정에서 사용할 수 있도록 모듈 A의 출력 변수를 지정해야 합니다. 모듈 A의 출력 변수와 동일한 값으로 새로운 최신 키 이름을 설정해야 합니다.
이제 모듈 B에 대해 variable.tf라는 파일을 생성해야 합니다. 이 파일 내부에 모듈 B에서 정의한 키와 정확히 동일한 이름으로 입력 변수를 생성합니다. 이 변수는 모듈에서 리소스의 동적 설정을 허용합니다. 이 변수를 다른 모듈에서도 사용할 수 있도록 프로세스를 복제합니다. 여기서 설정한 변수의 범위가 모듈 B로 제한되기 때문입니다.

### 30. Terraform의 맥락에서 원격 백엔드에 대해 무엇을 이해합니까?

Terraform의 원격 백엔드는 terraform 상태를 저장하고 terraform 클라우드에서 작업을 수행할 수도 있습니다. init, plan, apply, destroy, get, output, provider, state(하위 명령: list, mv, pull, push, rm, show), taint, untaint, validate 등의 terraform 명령을 실행할 수 있습니다. 원격 백엔드. 단일 또는 여러 원격 테라폼 클라우드 작업 공간과 함께 사용할 수 있습니다. terraform 클라우드의 실행 환경을 활용하여 terraform plan 또는 terraform apply와 같은 원격 작업을 수행할 수 있습니다.

### 31. Terraform에서 중복 리소스 오류를 방지하려면 어떻게 해야 합니까?

상황과 필요에 따라 3가지 방법 중 하나로 이루어질 수 있다.

리소스를 파괴하면 Terraform 코드가 더 이상 리소스를 관리하지 않습니다.
API에서 리소스 제거
가져오기 작업은 리소스 제거에도 도움이 됩니다.